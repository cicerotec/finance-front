<div class="mat-elevation-z4">

  <mat-drawer-container class="example-container">
    <mat-drawer #sideNav mode="side" [opened]="isShowingSidenav" position="end">

      <!-- toggle instituicoes -->
      <div>

        <mat-list>
          <h3 matLine style="text-align: center;"> Saldos </h3>
          <mat-divider></mat-divider>
          <mat-list-item *ngFor="let saldo of saldos">
            <p matLine class="toggle-nome"> {{saldo.nome}} </p>
            <p matLine class="toggle-valor"> {{saldo.valor | currency: 'BRL'}} </p>
          </mat-list-item>
        </mat-list>

      </div>

    </mat-drawer>
    <mat-drawer-content>

      <mat-card>

        <mat-card-title>
          Pesquisa
        </mat-card-title>

        <mat-form-field appearance="outline">
          <button matSuffix mat-button class="button-mes-anterior-posterior" (click)="monthBackward()"
            matTooltip="Pesquisa mês anterior">
            <mat-icon>chevron_left</mat-icon>
          </button>
          <mat-label>Por data de referência</mat-label>
          <mat-date-range-input [rangePicker]="pickerRef">
            <input matStartDate placeholder="Inicial" [(ngModel)]="data_de_referencia">
            <input matEndDate placeholder="Final" [(ngModel)]="data_de_referencia_final"
              (dateChange)="searchDataReferencia()">
          </mat-date-range-input>
          <mat-hint>dd/mm/aaaa – dd/mm/aaaa</mat-hint>
          <mat-datepicker-toggle matSuffix [for]="pickerRef"></mat-datepicker-toggle>
          <mat-date-range-picker #pickerRef></mat-date-range-picker>
          <button matSuffix mat-button class="button-mes-anterior-posterior" (click)="monthForward()"
            matTooltip="Pesquisa mês posterior">
            <mat-icon>chevron_right</mat-icon>
          </button>
        </mat-form-field>

        <!-- INICIO - DESCRIÇÃO --> 
        <mat-form-field appearance="outline">
          <mat-label>Descrição</mat-label>
          <input matInput [(ngModel)]="descricao" name="descricao">
        </mat-form-field>  
        <!-- FIM - DESCRIÇÃO --> 

        <!-- INICIO - TAGS --> 
        <mat-form-field appearance="outline" class="tags">
          <mat-chip-list #chipList [(ngModel)]="tags" [ngModelOptions]="{standalone: true}">
            <mat-chip
              *ngFor="let tag of tags"
              [selectable]="selectable"
              [removable]="removable"
              (removed)="remove(tag)">
              {{tag}}
              <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
            </mat-chip>
            <input
              placeholder="Selecione ou insira tag..."
              #tagInput
              [formControl]="tagCtrl"
              [matAutocomplete]="auto"
              [matChipInputFor]="chipList"
              [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
              (matChipInputTokenEnd)="add($event)">
          </mat-chip-list>
          <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
            <mat-option *ngFor="let tag of filteredTags | async" [value]="tag">
              {{tag}}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
      <!-- FIM - TAGS --> 

      <!-- INICIO - BOTOES --> 
      <button mat-raised-button color="primary" (click)="searchParams()" class="button-pesquisar">Pesquisar</button>
      <button mat-raised-button color="accent" (click)="toggleSidenav()" class="button-saldo">Saldos</button>
      <!-- INICIO - BOTOES -->         
      </mat-card>

      <div>
        <table class="table-resultado" mat-table [dataSource]="finances">

          <!-- data_de_referencia column -->
          <ng-container matColumnDef="data_de_referencia">
            <th mat-header-cell *matHeaderCellDef class="datas">Referência</th>
            <td mat-cell *matCellDef="let row">{{row.data_de_referencia | date: 'dd/MM/yyyy'}}</td>
          </ng-container>

          <!-- data_do_evento column -->
          <ng-container matColumnDef="data_do_evento">
            <th mat-header-cell *matHeaderCellDef class="datas">Evento</th>
            <td mat-cell *matCellDef="let row">{{row.data_do_evento | date: 'dd/MM/yyyy'}}</td>
          </ng-container>

          <!-- data_do_pagamento column -->
          <ng-container matColumnDef="data_do_pagamento">
            <th mat-header-cell *matHeaderCellDef class="datas">Pagamento</th>
            <td mat-cell *matCellDef="let row">{{row.data_do_pagamento | date: 'dd/MM/yyyy'}}</td>
          </ng-container>

          <!-- descricao column -->
          <ng-container matColumnDef="descricao">
            <th mat-header-cell *matHeaderCellDef>Descrição</th>
            <td mat-cell *matCellDef="let row">{{row.descricao}}</td>
          </ng-container>

          <!-- nota column -->
          <ng-container matColumnDef="nota">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let row">
              <button mat-stroked-button class="button-nota" matTooltip={{row.nota}}
                *ngIf="row.nota != null">nota</button>
            </td>
          </ng-container>

          <!-- grupo column -->
          <ng-container matColumnDef="grupos">
            <th mat-header-cell *matHeaderCellDef>Grupos</th>
            <td mat-cell *matCellDef="let row">{{row.grupos}}</td>
          </ng-container>

          <!-- instituicao_financeira column -->
          <ng-container matColumnDef="instituicao_financeira">
            <th mat-header-cell *matHeaderCellDef>Instituição</th>
            <td mat-cell *matCellDef="let row">{{row.instituicao_financeira}}</td>
          </ng-container>

          <!-- renda column -->
          <ng-container matColumnDef="renda">
            <th mat-header-cell *matHeaderCellDef>Renda</th>
            <td mat-cell *matCellDef="let row">{{row.renda | currency: 'BRL'}}</td>
          </ng-container>

          <!-- gastos column -->
          <ng-container matColumnDef="gastos">
            <th mat-header-cell *matHeaderCellDef>Gastos</th>
            <td mat-cell *matCellDef="let row">{{row.gastos | currency: 'BRL'}}</td>
          </ng-container>

          <!-- status column -->
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef>Status</th>
            <td mat-cell *matCellDef="let row">{{row.status}}</td>
          </ng-container>

          <!-- tags column -->
          <ng-container matColumnDef="tags">
            <th mat-header-cell *matHeaderCellDef>Tags</th>
            <td mat-cell *matCellDef="let row">{{row.tags}}</td>
          </ng-container>

          <!-- action column -->
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>Ações</th>
            <td mat-cell *matCellDef="let row">
              <a routerLink="/finances/update/{{ row.id }}" class="edit">
                <i matTooltip="editar" class="material-icons">
                  edit
                </i>
              </a>
              <a routerLink="/finances/create/{{ row.id }}" class="add">
                <i matTooltip="adicionar" class="material-icons">
                  replay_circle_filled
                </i>
              </a>
              <a routerLink="/finances/delete/{{ row.id }}" class="delete">
                <i matTooltip="deletar" class="material-icons">
                  delete
                </i>
              </a>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

      </div>

    </mat-drawer-content>
  </mat-drawer-container>

</div>